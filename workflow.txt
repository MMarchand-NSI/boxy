# 1. COMMITER tous les changements
git add .
git commit -m "Release v0.1.3"

# 2. TAGGER le commit (après avoir commité)
git tag v0.1.3

# 3. VÉRIFIER que tout est propre
git status  # Doit être "clean"
git describe --tags  # Doit afficher exactement "v0.1.3"

# 4. BUILD (nettoyer d'abord)
rm -rf dist/
uv build

# 5. VÉRIFIER le contenu
python -m zipfile -l dist/metagrid-0.1.3-py3-none-any.whl
# Doit contenir: metagrid/*.py, metagrid/py.typed, etc.

# 6. VÉRIFIER la qualité
uv run twine check dist/*

# 7. PUBLIER sur TestPyPI (optionnel)
uv run twine upload --repository testpypi dist/*

# 8. PUBLIER sur PyPI (production)
uv run twine upload dist/*

# 9. POUSSER sur Git (après publication réussie)
git push origin main
git push origin v0.1.3
